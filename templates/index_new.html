{% extends "base.html" %} {% block title %}Disaster Tweet Analyzer{% endblock %}
{% block custom_css %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/style.css') }}"
/>
<style>
  .background-grid {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(2, 1fr);
    gap: 10px;
    padding: 10px;
    z-index: -1;
    opacity: 0.2;
  }

  .background-grid img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 10px;
  }

  .hero-content {
    z-index: 1;
    position: relative;
  }

  .prediction-container {
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    padding: 30px;
    max-width: 800px;
    margin: 0 auto;
    margin-top: 30px;
  }

  .dark-mode .prediction-container {
    background-color: rgba(30, 30, 30, 0.9);
  }

  .features-section {
    margin-top: 60px;
  }

  .feature-card {
    height: 100%;
    text-align: center;
    padding: 20px;
  }

  .feature-icon {
    font-size: 2.5rem;
    margin-bottom: 15px;
    color: var(--primary-color);
  }

  .chatbot-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1000;
  }

  .chatbot-icon {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background-color: var(--primary-color);
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    box-shadow: var(--box-shadow);
    transition: var(--transition);
  }

  .chatbot-icon:hover {
    transform: scale(1.1);
  }

  .chatbot-icon i {
    font-size: 24px;
    color: white;
  }

  .chatbot-iframe {
    display: none;
    width: 350px;
    height: 500px;
    border: none;
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    margin-bottom: 20px;
  }
</style>
{% endblock %} {% block main_class %}{% endblock %} {% block content %}
<!-- Background Grid -->
<div class="background-grid">
  <img
    src="{{ url_for('static', filename='images/image1.jpg') }}"
    alt="Disaster Image 1"
  />
  <img
    src="{{ url_for('static', filename='images/image2.jpg') }}"
    alt="Disaster Image 2"
  />
  <img
    src="{{ url_for('static', filename='images/image3.jpg') }}"
    alt="Disaster Image 3"
  />
  <img
    src="{{ url_for('static', filename='images/image4.jpg') }}"
    alt="Disaster Image 4"
  />
  <img
    src="{{ url_for('static', filename='images/image5.jpg') }}"
    alt="Disaster Image 5"
  />
  <img
    src="{{ url_for('static', filename='images/image6.jpg') }}"
    alt="Disaster Image 6"
  />
</div>

<!-- Hero Section -->
<section class="hero-section">
  <div class="container">
    <div class="row align-items-center hero-content">
      <div class="col-lg-6">
        <h1 class="display-4 fw-bold mb-4">
          Real-time Disaster Tweet Analysis
        </h1>
        <p class="lead mb-4">
          Quickly analyze tweets to identify disaster situations and emergency
          events using our advanced machine learning model.
        </p>
        <button
          class="btn btn-light btn-lg"
          onclick="document.getElementById('prediction-container').scrollIntoView({behavior: 'smooth'})"
        >
          <i class="fas fa-search me-2"></i> Analyze a Tweet
        </button>
      </div>
      <div class="col-lg-6 d-none d-lg-block text-center">
        <img
          src="{{ url_for('static', filename='images/logo.png') }}"
          alt="Disaster Tweet Analyzer"
          class="img-fluid"
          style="max-height: 200px"
        />
      </div>
    </div>
  </div>
</section>

<!-- Tweet Prediction Box -->
<div class="container">
  <div class="prediction-container" id="prediction-container">
    <h2 class="text-center mb-4">Disaster Tweet Prediction</h2>
    <div class="row">
      <div class="col-md-8 mx-auto">
        <form id="prediction-form" method="POST" onsubmit="predictTweet(event)">
          <div class="mb-3">
            <label for="tweet-text" class="form-label"
              >Enter a tweet to analyze:</label
            >
            <textarea
              class="form-control"
              id="tweet-text"
              rows="3"
              placeholder="Enter the text of a tweet to analyze its disaster potential..."
              required
            ></textarea>
          </div>
          <div class="mb-3 text-center">
            <button type="submit" class="btn btn-primary">
              <i class="fas fa-search me-2"></i> Analyze Tweet
            </button>
            <button
              type="button"
              class="btn btn-outline-primary ms-2"
              onclick="authenticateWithTwitter()"
            >
              <i class="fab fa-twitter me-2"></i> Connect to Twitter
            </button>
          </div>
        </form>
        <div class="mt-4" id="result">
          <!-- Results will be displayed here -->
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Features Section -->
<section class="features-section">
  <div class="container">
    <h2 class="text-center mb-5">Our Features</h2>
    <div class="row">
      <div class="col-md-4 mb-4">
        <div class="card feature-card">
          <div class="feature-icon">
            <i class="fas fa-robot"></i>
          </div>
          <div class="card-body">
            <h5 class="card-title">AI-Powered Analysis</h5>
            <p class="card-text">
              Our advanced machine learning algorithms can accurately identify
              disaster-related content from tweets.
            </p>
          </div>
        </div>
      </div>
      <div class="col-md-4 mb-4">
        <div class="card feature-card">
          <div class="feature-icon">
            <i class="fas fa-map-marked-alt"></i>
          </div>
          <div class="card-body">
            <h5 class="card-title">Location Extraction</h5>
            <p class="card-text">
              Automatically extract and identify locations mentioned in disaster
              tweets for better response coordination.
            </p>
          </div>
        </div>
      </div>
      <div class="col-md-4 mb-4">
        <div class="card feature-card">
          <div class="feature-icon">
            <i class="fas fa-chart-line"></i>
          </div>
          <div class="card-body">
            <h5 class="card-title">Sentiment Analysis</h5>
            <p class="card-text">
              Understand the emotional context of tweets to gauge the severity
              and impact of disasters.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Chatbot -->
<div class="chatbot-container">
  <div class="chatbot-icon" onclick="toggleChatbot()">
    <i class="fas fa-comment-dots"></i>
  </div>
  <iframe
    id="chatbot-iframe"
    class="chatbot-iframe"
    src="https://www.chatbase.co/chatbot-iframe/hqVV0w6B2fvsktJm6z0P0"
  ></iframe>
</div>
{% endblock %} {% block custom_js %}
<script>
  function toggleChatbot() {
    const iframe = document.getElementById("chatbot-iframe");
    if (iframe.style.display === "none" || iframe.style.display === "") {
      iframe.style.display = "block";
    } else {
      iframe.style.display = "none";
    }
  }

  // Add script to handle Twitter authentication
  function authenticateWithTwitter() {
    alert("Twitter authentication feature coming soon!");
  }

  // Function to predict tweets
  async function predictTweet(event) {
    event.preventDefault();

    const tweetText = document.getElementById("tweet-text").value.trim();
    if (!tweetText) {
      alert("Please enter a tweet to analyze");
      return;
    }

    // Show loading state in the result div
    document.getElementById("result").innerHTML = `
        <div class="text-center">
            <span class="loader"></span>
            <p class="mt-3">Analyzing tweet...</p>
        </div>
    `;
    document.getElementById("result").classList.add("show");

    try {
      const response = await fetch("/predict", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ tweet: tweetText }),
      });

      const data = await response.json();

      // Display results
      let resultHTML = "";
      if (data.is_disaster) {
        resultHTML = `
                <div class="alert alert-danger" role="alert">
                    <h4 class="alert-heading"><i class="fas fa-exclamation-triangle"></i> Disaster Tweet Detected!</h4>
                    <p>This tweet appears to be about a real disaster or emergency.</p>
                    <hr>
                    <p class="mb-0">Confidence: ${(
                      data.confidence * 100
                    ).toFixed(2)}%</p>
                </div>
            `;

        if (data.locations && data.locations.length > 0) {
          resultHTML += `
                    <div class="card mt-3">
                        <div class="card-header">
                            <i class="fas fa-map-marker-alt"></i> Locations Mentioned
                        </div>
                        <div class="card-body">
                            <ul class="list-group">
                                ${data.locations
                                  .map(
                                    (loc) =>
                                      `<li class="list-group-item">${loc}</li>`
                                  )
                                  .join("")}
                            </ul>
                        </div>
                    </div>
                `;
        }

        if (data.disaster_type) {
          resultHTML += `
                    <div class="card mt-3">
                        <div class="card-header">
                            <i class="fas fa-tag"></i> Disaster Type
                        </div>
                        <div class="card-body">
                            <p class="card-text">${data.disaster_type}</p>
                        </div>
                    </div>
                `;
        }
      } else {
        resultHTML = `
                <div class="alert alert-success" role="alert">
                    <h4 class="alert-heading"><i class="fas fa-check-circle"></i> Not a Disaster Tweet</h4>
                    <p>This tweet does not appear to be about a real disaster or emergency.</p>
                    <hr>
                    <p class="mb-0">Confidence: ${(
                      data.confidence * 100
                    ).toFixed(2)}%</p>
                </div>
            `;
      }

      if (data.sentiment) {
        resultHTML += `
                <div class="card mt-3">
                    <div class="card-header">
                        <i class="fas fa-smile"></i> Sentiment Analysis
                    </div>
                    <div class="card-body">
                        <p class="card-text">Sentiment: ${
                          data.sentiment.label
                        } (${(data.sentiment.score * 100).toFixed(2)}%)</p>
                    </div>
                </div>
            `;
      }

      document.getElementById("result").innerHTML = resultHTML;
    } catch (error) {
      console.error("Error predicting tweet:", error);
      document.getElementById("result").innerHTML = `
            <div class="alert alert-warning" role="alert">
                <h4 class="alert-heading"><i class="fas fa-exclamation-circle"></i> Error</h4>
                <p>An error occurred while analyzing the tweet. Please try again.</p>
            </div>
        `;
    }
  }
</script>
<script
  src="https://www.chatbase.co/embed.min.js"
  chatbotId="hqVV0w6B2fvsktJm6z0P0"
  domain="www.chatbase.co"
  defer
></script>
{% endblock %}
